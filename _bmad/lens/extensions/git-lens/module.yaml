# Git-Lens Extension Module Configuration
# Extension of LENS module
# Generated: 2026-02-01

code: lens
name: "Git-Lens"
header: "Git workflow orchestration for LENS"
subheader: "Automated branching, PR gating, and workflow enforcement"
default_selected: false

# Extension registration
extension_type: hooks
hook_registration:
  - hook: before-initiative
    trigger: "#file:new-service,#file:new-microservice,#file:new-feature"
    file: "hooks/before-initiative.md"
  - hook: before-workflow
    trigger: "workflow-start"
    file: "hooks/before-workflow.md"
  - hook: after-workflow
    trigger: "workflow-complete"
    file: "hooks/after-workflow.md"
  - hook: before-phase
    trigger: "phase-start"
    file: "hooks/before-phase.md"
  - hook: after-phase
    trigger: "phase-complete"
    file: "hooks/after-phase.md"

# Installation prompts
base_ref:
  prompt: "Default base branch for initiatives"
  default: "main"
  result: "{value}"

auto_push:
  prompt: "Automatically push branches on creation?"
  default: true
  result: "{value}"

remote_name:
  prompt: "Git remote name to use"
  default: "origin"
  result: "{value}"

fetch_strategy:
  prompt: "Fetch strategy for remote validation"
  default: "background"
  result: "{value}"
  single-select:
    - value: "background"
      label: "Background - cached refs with TTL"
    - value: "sync"
      label: "Sync - fetch before every validation"
    - value: "manual"
      label: "Manual - only on demand"

fetch_ttl:
  prompt: "Fetch cache TTL (seconds)"
  default: 60
  result: "{value}"

commit_strategy:
  prompt: "Auto-commit strategy for workflow completion"
  default: "prompt"
  result: "{value}"
  single-select:
    - value: "prompt"
      label: "Prompt - ask each time"
    - value: "always"
      label: "Always - auto-commit with template"
    - value: "never"
      label: "Never - user commits manually"

validation_cascade:
  prompt: "Merge validation strategy"
  default: "ancestry_only"
  result: "{value}"
  single-select:
    - value: "ancestry_only"
      label: "Git only - ancestry check"
    - value: "with_pr_api"
      label: "Git + PR API check"
    - value: "with_override"
      label: "Git + manual override"

pr_api_enabled:
  prompt: "Enable GitHub/GitLab API for PR validation?"
  default: false
  result: "{value}"

compass_enabled:
  prompt: "Enable Compass reviewer suggestions?"
  default: true
  result: "{value}"

compass_roster_file:
  prompt: "Compass roster file path (CSV or YAML)"
  default: "{project-root}/_bmad/lens/extensions/git-lens/test-data/mock-compass.csv"
  result: "{value}"

state_folder:
  prompt: "State file location"
  default: "{output_folder}/git-lens"
  result: "{value}"

event_log_enabled:
  prompt: "Enable event log for state recovery?"
  default: true
  result: "{value}"
