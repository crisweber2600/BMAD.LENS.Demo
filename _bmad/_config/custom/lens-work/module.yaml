# LENS Workbench Module Configuration
# Generated: 2026-02-03 via BMAD Module workflow

code: lens-work
name: "LENS Workbench"
header: "Guided lifecycle router with git-orchestrated discipline"
subheader: "Phase-aware orchestration for BMAD workflows with automated branch topology"
default_selected: false

# Module Type
type: standalone
global: false

# Dependencies
dependencies:
  - bmm      # Core workflow execution
  - core     # BMAD core infrastructure

optional_dependencies:
  - cis      # Creative Innovation Suite (brainstorming/research)
  - tea      # Test Engineering Academy (test planning)

# Installation Questions
install_questions:
  target_projects_path:
    prompt: "Path to TargetProjects folder (where repos are cloned)"
    default: "../TargetProjects"
    result: "{answer}"
  
  docs_output_path:
    prompt: "Path for canonical documentation output"
    default: "Docs"
    result: "{answer}"
  
  enable_telemetry:
    prompt: "Enable lifecycle telemetry dashboards?"
    type: boolean
    default: true
    result: "{answer}"
  
  discovery_depth:
    prompt: "Default discovery depth?"
    type: single-select
    options:
      - shallow
      - standard
      - deep
    default: standard
    result: "{answer}"

  enable_jira_integration:
    prompt: "Enable JIRA integration during discovery?"
    type: boolean
    default: false
    result: "{answer}"

  lens_data_folder:
    prompt: "Path for lens data storage"
    default: "{project-root}/_bmad/lens-work"
    result: "{answer}"

  metadata_output_folder:
    prompt: "Path for BMAD metadata storage"
    default: "{project-root}/_bmad-output"
    result: "{answer}"

  default_git_remote:
    prompt: "Default git remote type"
    type: single-select
    options:
      - github
      - gitlab
      - azure-devops
    default: github
    result: "{answer}"

# Agent Roster
agents:
  - id: compass
    file: agents/compass.agent.yaml
    name: Compass
    role: Phase-aware lifecycle router
  
  - id: casey
    file: agents/casey.agent.yaml
    name: Casey
    role: Git branch orchestrator
  
  - id: tracey
    file: agents/tracey.agent.yaml
    name: Tracey
    role: State & recovery specialist
  
  - id: scout
    file: agents/scout.agent.yaml
    name: Scout
    role: Bootstrap & discovery manager

  - id: scribe
    file: agents/scribe.agent.yaml
    name: Cornelius
    role: Constitutional governance guardian

# Workflow Categories
workflow_categories:
  core:
    description: "Auto-triggered lifecycle operations"
    workflows:
      - init-initiative    # DEPRECATED â€” use router/init-initiative instead
      - start-workflow
      - finish-workflow
      - phase-lifecycle    # Consolidates: detect-layer, phase-transition, start-phase, finish-phase, open-large-review, open-final-pbr
  
  router:
    description: "Phase router commands (user-facing)"
    workflows:
      - pre-plan
      - spec
      - plan
      - review
      - dev
      - init-initiative
  
  discovery:
    description: "Repo discovery and documentation"
    workflows:
      - repo-discover
      - repo-document
      - repo-reconcile
      - repo-status
      - discover
      - analyze-codebase
      - generate-docs
      - lens-sync
      - domain-map
      - impact-analysis

  utility:
    description: "Manual/support workflows"
    workflows:
      - status
      - resume
      - sync
      - fix-state
      - override
      - archive
      - bootstrap
      - batch-process
      - onboarding
      - setup-rollback
      - fix-story
      - switch
      - check-repos
      - migrate-state
      - recreate-branches

  governance:
    description: "Constitutional governance and compliance"
    workflows:
      - constitution
      - compliance-check
      - resolve-constitution
      - ancestry
      - resolve-context

  includes:
    description: "Shared reference files included by workflows"
    files:
      - lane-topology
      - jira-integration
      - gate-event-template
      - pr-links
      - docs-path
      - artifact-validator

# Prompts (entry point commands)
prompts:
  directory: "prompts/"
  files:
    # System
    - lens-work.start.prompt.md
    - lens-work.compass.prompt.md
    # Phase Router (Compass)
    - lens-work.pre-plan.prompt.md
    - lens-work.spec.prompt.md
    - lens-work.plan.prompt.md
    - lens-work.review.prompt.md
    - lens-work.dev.prompt.md
    # Initiative Commands (Compass)
    - lens-work.new-domain.prompt.md
    - lens-work.new-service.prompt.md
    - lens-work.new-feature.prompt.md
    - lens-work.fix-story.prompt.md
    # State & Recovery (Tracey)
    - lens-work.status.prompt.md
    - lens-work.resume.prompt.md
    - lens-work.sync.prompt.md
    - lens-work.fix.prompt.md
    - lens-work.override.prompt.md
    - lens-work.archive.prompt.md
    # Context Commands (Compass)
    - lens-work.switch.prompt.md
    - lens-work.context.prompt.md
    - lens-work.focus.prompt.md
    - lens-work.lens.prompt.md
    # Governance (Scribe)
    - lens-work.constitution.prompt.md
    - lens-work.compliance.prompt.md
    - lens-work.scribe.prompt.md
    - lens-work.ancestry.prompt.md
    # Discovery (Scout)
    - lens-work.domain-map.prompt.md
    - lens-work.impact-analysis.prompt.md
    # Utility (Casey)
    - lens-work.recreate-branches.prompt.md
    # Bootstrap & Discovery (Scout)
    - lens-work.onboard.prompt.md
    - lens-work.bootstrap.prompt.md
    - lens-work.discover.prompt.md
    - lens-work.document.prompt.md
    - lens-work.lens-sync.prompt.md
    - lens-work.reconcile.prompt.md
    - lens-work.repo-status.prompt.md
    - lens-work.rollback.prompt.md

# Output Paths
outputs:
  state_file: "_bmad-output/lens-work/state.yaml"
  event_log: "_bmad-output/lens-work/event-log.jsonl"
  repo_inventory: "_bmad-output/lens-work/repo-inventory.yaml"
  bootstrap_report: "_bmad-output/lens-work/bootstrap-report.md"
  document_log: "_bmad-output/lens-work/repo-document-log.md"
  dashboards: "_bmad-output/lens-work/dashboards/"
  initiatives_dir: "_bmad-output/lens-work/initiatives/"
  constitutions_dir: "_bmad-output/lens-work/constitutions/"
  domain_map: "_bmad-output/lens-work/domain-map.yaml"
  personal_profile: "_bmad-output/personal/profile.yaml"

# Templates
templates:
  constitutions:
    directory: "templates/constitutions/"
    files:
      - domain-constitution.md
      - service-constitution.md
      - microservice-constitution.md
      - feature-constitution.md

# Documentation
docs:
  directory: "docs/"
  copilot_instructions: "docs/copilot-instructions.md"
  install_to_github: ".github/lens-work-instructions.md"
  files:
    # v3 operational docs
    - copilot-instructions.md
    - migration-guide.md
    - branch-protection.md
    - ci-integration.md
    - hotfix-release-strategy.md
    - multi-repo-initiatives.md
    - bmad-folder-changes-quick-spec.md
    # Reference docs (from discovery workflows)
    - agents.md
    - architecture.md
    - configuration.md
    - examples.md
    - getting-started.md
    - getting-started-old.md
    - installation-testing.md
    - migrations.md
    - operations.md
    - prerequisites.md
    - review-log.md
    - scope.md
    - session-store.md
    - spec-checklist.md
    - testing.md
    - traceability.md
    - troubleshooting.md
    - workflows.md
    # Governance docs
    - context-extension.md
    - governance/constitution-guide.md
    - governance/command-reference.md
    - governance/examples.md
    - governance/getting-started.md
    # API Reference
    - api-reference.md

# Tests
tests:
  directory: "tests/"
  files:
    - lens-work-tests.spec.md

# Validation Scripts
scripts:
  directory: "scripts/"
  files:
    - validate-lens-work.ps1
    - sync-prompts.ps1

# Git Configuration
git:
  fetch_strategy: background
  fetch_ttl: 60
  branch_patterns:
    base: "{domain}/{initiative_id}/base"
    small_lane: "{domain}/{initiative_id}/small"
    large_lane: "{domain}/{initiative_id}/large"
    phase: "{domain}/{initiative_id}/{size}-{phase_number}"
    workflow: "{domain}/{initiative_id}/{size}-{phase_number}-{workflow_name}"
